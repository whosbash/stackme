## Criando a stack pgadmin.yaml 
cat > pgadmin${1:+_$1}.yaml <<EOL
version: "3.7"
services:  

## --------------------------- ORION --------------------------- ##

  pgadmin${1:+_$1}:
    image: dpage/pgadmin4:latest ## VersÃ£o do PgAdmin 4

    volumes:
      - pgadmin${1:+_$1}_data:/var/lib/pgadmin

    networks:
      - $nome_rede_interna ## Nome da rede interna

    environment:
      ## Dados de Acesso
      - PGADMIN_DEFAULT_EMAIL=$user_PgAdmin_4
      - PGADMIN_DEFAULT_PASSWORD=$pass_PgAdmin_4

    deploy:
      mode: replicated
      replicas: 1
      placement:
          constraints:
            - node.role == manager
      resources:
          limits:
            cpus: '0.4'
            memory: 256M
      labels:
          - traefik.enable=true
          - traefik.http.routers.pgadmin${1:+_$1}.rule=Host(\`$url_PgAdmin_4\`) ## Url da Ferramenta
          - traefik.http.services.pgadmin${1:+_$1}.loadbalancer.server.port=80
          - traefik.http.routers.pgadmin${1:+_$1}.service=pgadmin${1:+_$1}
          - traefik.http.routers.pgadmin${1:+_$1}.tls.certresolver=letsencryptresolver
          - traefik.http.routers.pgadmin${1:+_$1}.entrypoints=websecure
          - traefik.http.routers.pgadmin${1:+_$1}.tls=true

## --------------------------- ORION --------------------------- ##

volumes:
  pgadmin${1:+_$1}_data:
    external: true
    
networks:
  $nome_rede_interna: ## Nome da rede interna
    name: $nome_rede_interna ## Nome da rede interna
    external: true
EOL